let players=[];class Player{constructor(t,e,i,a,s,r,o){this.parent=t,this.audio=e,this.audioSource=i,this.playBtn=a,this.timeLine=s,this.curTime=r,this.fullTime=o,this.isPlaying=!1,this.setTimeLineMax(),this.playMusic(),this.timeUpdate(),this.userTimeMoving(),this.setSource(),this.clickOnSong(),this.pauseOther(),this.songsCounter=1}setSource(){this.audio.src=this.audioSource[0]}setTimeLineMax(){this.audio.addEventListener("loadedmetadata",(()=>{this.timeLine.max=Math.floor(this.audio.duration)}))}pauseOther(){for(let t=0;t<players.length;t++)players[t].isPlaying&&(players[t].audio.pause(),players[t].playBtn.classList.toggle("player__btn-play--pause"),players[t].isPlaying=!1,players[t].playBtn.ariaLabel="play")}playMusic(){this.playBtn.addEventListener("click",(()=>{if(this.playBtn.classList.toggle("player__btn-play--pause"),this.isPlaying)this.audio.pause(),this.isPlaying=!1,this.playBtn.ariaLabel="play";else{this.pauseOther(),this.isPlaying=!0;let t=Array.from(document.querySelectorAll(".tracks__item"));t[0].classList.add("tracks__track-item--active");for(let e=0;e<t.length;e++)0!=e&&t[e].classList.contains("tracks__track-item--active")&&(t[0].classList.remove("tracks__track-item--active"),this.audio.play());this.audio.play(),this.playBtn.ariaLabel="pause"}}))}clickOnSong(){let t=Array.from(document.querySelectorAll(".tracks__item"));if(this.audioSource.length>1)for(let e=0;e<t.length;e++)for(let i=0;i<t.length;i++)t[e].addEventListener("click",(()=>{this.pauseOther(),t[i].classList.remove("tracks__track-item--active"),t[e].classList.add("tracks__track-item--active"),this.audio.src=this.audioSource[e],this.audio.addEventListener("loadedmetadata",(()=>{this.fullTime.innerHTML=`${Math.floor(this.audio.duration/60)}:${Math.floor(this.audio.duration%60)}`,this.audio.play()})),this.playBtn.classList.add("player__btn-play--pause"),this.playBtn.ariaLabel="play",this.isPlaying=!0,this.songsCounter=e+1}))}userTimeMoving(){this.timeLine.addEventListener("change",(()=>{this.audio.currentTime=this.timeLine.value,this.timeLine.style.backgroundSize=100*(this.timeLine.value-this.timeLine.min)/(this.timeLine.max-this.timeLine.min)+"% 100%"}))}timeUpdate(){this.audio.addEventListener("timeupdate",(()=>{var t=this.audio.currentTime,e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),a=Math.round(t-3600*e-60*i);if(0!=a&&a%60==0&&(a=0,i++),e<10&&(e="0"+e),i<10&&(i="0"+i),a<10&&(a="0"+a),this.curTime.innerText=i+":"+a,this.isPlaying&&(this.timeLine.value=this.audio.currentTime),t>=this.timeLine.max&&(this.audio.pause(),this.playBtn.classList.remove("player__btn-play--pause"),this.curTime.innerHTML="00:00",this.timeLine.value=0,this.audioSource.length>1)){this.audio.src=this.audioSource[this.songsCounter],this.playBtn.classList.toggle("player__btn-play--pause"),this.audio.addEventListener("loadedmetadata",(()=>{this.fullTime.innerHTML=`${Math.floor(this.audio.duration/60)}:${Math.floor(this.audio.duration%60)}`,this.audio.play()}));let t=Array.from(document.querySelectorAll(".tracks__item"));for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{t[e].classList.add("tracks__track-item--active"),this.setSource(),this.audio.play()}));this.songsCounter<t.length&&t[this.songsCounter].classList.add("tracks__track-item--active"),t[this.songsCounter-1].classList.remove("tracks__track-item--active"),this.songsCounter++,this.songsCounter===this.audioSource.length+1&&(t[this.songsCounter-2].classList.remove("tracks__track-item--active"),this.playBtn.classList.remove("player__btn-play--pause"),this.audio.pause(),this.songsCounter=1)}this.timeLine.style.backgroundSize=100*(this.timeLine.value-this.timeLine.min)/(this.timeLine.max-this.timeLine.min)+"% 100%"}))}}const heroPlayer=new Player(document.querySelector(".hero__audio-container"),document.querySelector(".hero__audio"),["audio/song-2.mp3"],document.querySelector(".hero__btn-play"),document.querySelector(".hero__cur-time-line"),document.querySelector(".hero__play-time"),document.querySelector(".hero__full-time")),tracksPlayer=new Player(document.querySelector(".tracks__audio-container"),document.querySelector(".tracks__audio"),["audio/song-1.mp3","audio/song-2.mp3","audio/song-3.mp3","audio/song-4.mp3","audio/song-5.mp3","audio/song-6.mp3"],document.querySelector(".tracks__btn-play"),document.querySelector(".tracks__cur-time-line"),document.querySelector(".tracks__play-time"),document.querySelector(".tracks__full-time"));players.push(heroPlayer,tracksPlayer),console.log(players.length);